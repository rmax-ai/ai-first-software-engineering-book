{
  "chapter_lifecycle_rules": {
    "lifecycle_order": [
      "draft",
      "refined",
      "approved",
      "frozen"
    ],
    "transitions": {
      "approved_to_frozen": {
        "requires_no_modifications": true
      },
      "draft_to_refined": {
        "required_consecutive_passes": 2
      },
      "frozen_override": {
        "requires_manual_override": true
      },
      "refined_to_approved": {
        "requires_human_validation": true
      }
    }
  },
  "chapter_selection_strategy": {
    "notes": "Deterministic ordering: draft lifecycle first, then lowest structure_score, then highest drift_score, then oldest last_modified_iteration. Locked/frozen chapters are not eligible.",
    "priority_order": [
      "lifecycle:draft",
      "quality_metrics:lowest_structure_score",
      "quality_metrics:highest_drift_score",
      "stability:oldest_last_modified_iteration"
    ]
  },
  "chapters": {
    "01-paradigm-shift": {
      "current_iteration": 10,
      "drift_history": [],
      "human_validation": {
        "approved": false,
        "approved_at": null,
        "approved_by": ""
      },
      "iteration_log": [
        {
          "critic_score": 0.0,
          "diff_size": 0.0,
          "drift_score": 0.0,
          "iteration": 2,
          "planner_focus": [
            "clarify scope in ## Thesis",
            "add measurable outcomes in ## Concrete Example 1",
            "add operational risk in ## Trade-offs"
          ]
        },
        {
          "critic_score": 0.0,
          "diff_size": 0.0,
          "drift_score": 0.0,
          "iteration": 3,
          "planner_focus": [
            "## Thesis: tighten scope"
          ]
        },
        {
          "critic_score": 0.0,
          "diff_size": 0.0,
          "drift_score": 0.0,
          "iteration": 4,
          "planner_focus": [
            "## Thesis: tighten scope"
          ]
        },
        {
          "critic_score": 0.0,
          "diff_size": 0.0,
          "drift_score": 0.0,
          "iteration": 5,
          "planner_focus": [
            "## Thesis: tighten scope"
          ]
        },
        {
          "critic_score": 0.0,
          "diff_size": 0.0,
          "drift_score": 0.0,
          "iteration": 6,
          "planner_focus": [
            "## Thesis: tighten scope"
          ]
        },
        {
          "critic_score": 0.0,
          "diff_size": 0.0,
          "drift_score": 0.0,
          "iteration": 7,
          "planner_focus": [
            "## Thesis: tighten scope"
          ]
        },
        {
          "critic_score": 0.8133333333333334,
          "diff_size": 0.8695652173913043,
          "drift_score": 0.3086496638987742,
          "iteration": 8,
          "planner_focus": [
            "Tighten the definition of \"architectural inversion\" in ## Thesis with one concrete, testable sentence",
            "Make the model-vs-harness attribution claim falsifiable by adding 2\u20133 measurable signals in ## System Breakdown",
            "Increase specificity of both examples by adding exact artifacts and stop conditions under ## Concrete Example 1 and ## Concrete Example 2",
            "Ensure the chapter explicitly connects ## Trade-offs and ## Failure Modes back to the hypothesis with a short synthesis paragraph"
          ]
        },
        {
          "critic_score": 0.84,
          "diff_size": 0.16666666666666666,
          "drift_score": 0.32074215900802333,
          "iteration": 9,
          "planner_focus": [
            "Enforce sentence-length limit in ## Thesis by splitting the operational definition into shorter sentences or bullets",
            "Justify the \"architectural inversion\" claim in ## Thesis with one concrete, non-metaphorical sentence tied to the harness/model boundary",
            "Align ## Concrete Example 2 with ## System Breakdown by adding an explicit \"Measured outputs\" list using the defined signals"
          ]
        },
        {
          "critic_score": 0.8466666666666667,
          "diff_size": 0.04878048780487805,
          "drift_score": 0.32189183987682835,
          "iteration": 10,
          "planner_focus": [
            "Reduce minor repetition between ## Thesis and the Synthesis paragraph under ## Failure Modes by compressing repeated claims about harness constraints and evaluation gates",
            "Lower drift risk by making the Synthesis paragraph explicitly point back to the named signals in ## System Breakdown (iterations-to-pass, time-to-green, attribution rate)"
          ]
        }
      ],
      "last_eval": {
        "critic": {
          "clarity_score": 0.87,
          "decision": "approve",
          "drift_score": 0.2,
          "example_density": 0.74,
          "failure_modes_present": true,
          "structure_score": 0.93,
          "tradeoff_presence": true,
          "violations": []
        },
        "deterministic": {
          "chapter_quality": {
            "forbidden_hits": [],
            "pass": true,
            "required_missing": [],
            "scores": {
              "examples_count": 1.0,
              "failure_modes": 1.0,
              "system_breakdown": 1.0,
              "thesis_clarity": 1.0,
              "tradeoffs": 1.0
            },
            "timestamp": "2026-02-22T15:33:13Z",
            "total": 1.0
          },
          "drift_detection": {
            "drift_metrics": {
              "anchor_deltas": {
                "agent": 0.0,
                "harness": 0.47777777777777775,
                "model": 0.5256410256410257
              },
              "cross_chapter_similarity_hits": []
            },
            "hype_hits": [],
            "pass": false,
            "repetition_metrics": {
              "duplicate_sentence_ratio": 0.0,
              "near_duplicate_ngram_ratio": 0.015011547344110854
            },
            "timestamp": "2026-02-22T15:33:13Z"
          },
          "drift_score": 0.32189183987682835,
          "passed": false,
          "similarity_max": 0.6551811582916793,
          "style_guard": {
            "adjective_density": 0.07011494252873564,
            "forbidden_hits": [],
            "pass": true,
            "sentence_length_violations": [
              {
                "sentence": "# Chapter 01 \u2014 Paradigm Shift ## Thesis AI-first software engineering is an architectural inversion: machine reasoning becomes a primary execution substrate, and the harness (tools, constraints, evalu",
                "words": 32
              },
              {
                "sentence": "- **Attribution checklist** (what evidence makes a failure \u201cbelong\u201d to a layer): - **Spec/prompt**: requirement is ambiguous or contradictory; different reasonable interpretations change expected outp",
                "words": 32
              },
              {
                "sentence": "- **Eval/CI**: mismatch between what is asserted and what is intended; tests are incorrect, overly strict, or missing a required case; fixing the test changes outcomes without changing product behavio",
                "words": 30
              },
              {
                "sentence": "- If the loop reaches a fixed budget (e.g., N iterations or T minutes) without progress, stop and escalate to a human with the trace and the smallest reproducible failing case.",
                "words": 31
              }
            ],
            "timestamp": "2026-02-22T15:33:13Z"
          }
        }
      },
      "lifecycle": "draft",
      "path": "book/chapters/01-paradigm-shift.md",
      "quality_metrics": {
        "clarity_score": 0.87,
        "drift_score": 0.32189183987682835,
        "example_density": 0.74,
        "failure_mode_presence": true,
        "structure_score": 0.93,
        "tradeoff_presence": true
      },
      "research": {
        "falsifiable": true,
        "hypothesis": "",
        "validation_status": "untested"
      },
      "revision_count": 10,
      "stability": {
        "consecutive_passes": 0,
        "frozen_candidate": false,
        "last_modified_iteration": 10
      },
      "status": "hold"
    },
    "02-harness-engineering": {
      "current_iteration": 4,
      "drift_history": [],
      "human_validation": {
        "approved": false,
        "approved_at": null,
        "approved_by": ""
      },
      "iteration_log": [
        {
          "critic_score": 0.8466666666666667,
          "diff_size": 1.0,
          "drift_score": 0.3010328139754485,
          "iteration": 2,
          "planner_focus": [
            "Tighten the causal claim in ## Thesis (why harness changes outperform model swaps in practice)",
            "Make ## System Breakdown more operational by defining inputs/outputs for each plane and a minimal contract surface",
            "Deepen ## Concrete Example 1 and ## Concrete Example 2 with step-by-step flows (happy path + recovery) and explicit pass/fail criteria",
            "Strengthen ## Failure Modes by pairing each failure with detection signals and concrete mitigations in the harness"
          ]
        },
        {
          "critic_score": 0.8533333333333334,
          "diff_size": 0.029850746268656716,
          "drift_score": 0.30102916960715126,
          "iteration": 3,
          "planner_focus": [
            "Tighten sentence length and readability in ## Thesis by splitting the long definition of \u201cpredictable\u201d into 2\u20133 sentences",
            "Remove out-of-chapter artifacts appended after the chapter (non-heading blocks) to preserve chapter-only content integrity",
            "Align metaphor policy in ## Trade-offs by replacing \u201cgreen bar\u201d with a literal, test-oriented phrasing (or add a one-sentence justification if the metaphor is retained)"
          ]
        },
        {
          "critic_score": 0.8566666666666668,
          "diff_size": 0.029850746268656716,
          "drift_score": 0.30103722143195827,
          "iteration": 4,
          "planner_focus": [
            "Remove the trailing non-chapter artifact block that appears after ## Research Directions",
            "Reduce sentence length in ## Thesis by splitting the Hypothesis sentence into shorter sentences while preserving the falsifiable claim",
            "Reduce sentence length in ## System Breakdown by splitting the \u201cminimal contract surface\u201d sentence into shorter sentences without changing meaning"
          ]
        }
      ],
      "last_eval": {
        "critic": {
          "clarity_score": 0.89,
          "decision": "refine",
          "drift_score": 0.19,
          "example_density": 0.78,
          "failure_modes_present": true,
          "structure_score": 0.9,
          "tradeoff_presence": true,
          "violations": [
            "Trailing non-chapter artifact block remains after the final heading content: the <reminder>\u2026<sql_tables>\u2026</sql_tables></reminder> block is outside the chapter heading structure.",
            "At least one sentence exceeds evals/style-guard.yaml sentence_length.max_words=28: the first Hypothesis sentence in ## Thesis is longer than 28 words."
          ]
        },
        "deterministic": {
          "chapter_quality": {
            "forbidden_hits": [],
            "pass": true,
            "required_missing": [],
            "scores": {
              "examples_count": 1.0,
              "failure_modes": 1.0,
              "system_breakdown": 1.0,
              "thesis_clarity": 1.0,
              "tradeoffs": 1.0
            },
            "timestamp": "2026-02-22T15:39:54Z",
            "total": 1.0
          },
          "drift_detection": {
            "drift_metrics": {
              "anchor_deltas": {
                "agent": 0.8823529411764706,
                "harness": 0.6358024691358024,
                "model": 0.29032258064516125
              },
              "cross_chapter_similarity_hits": []
            },
            "hype_hits": [],
            "pass": false,
            "repetition_metrics": {
              "duplicate_sentence_ratio": 0.0,
              "near_duplicate_ngram_ratio": 0.0007112375533428165
            },
            "timestamp": "2026-02-22T15:39:54Z"
          },
          "drift_score": 0.30103722143195827,
          "passed": false,
          "similarity_max": 0.7471690818679603,
          "style_guard": {
            "adjective_density": 0.06170212765957447,
            "forbidden_hits": [],
            "pass": false,
            "sentence_length_violations": [
              {
                "sentence": "# Chapter 02 \u2014 Harness Engineering ## Thesis Harness engineering is the discipline of turning a general-purpose model into a predictable system by defining tool contracts, constraints, loop control, a",
                "words": 30
              },
              {
                "sentence": "Hypothesis (falsifiable): for a fixed set of tasks and repositories, tightening the harness (schemas, budgets, gates, and recovery rules) reduces regression rate and rework more than swapping between ",
                "words": 32
              },
              {
                "sentence": "A useful way to operationalize the planes is to name what each plane consumes, what it produces, and one metric you can track: | Plane | Responsibilities | Key artifacts (inputs/outputs) | One measura",
                "words": 53
              },
              {
                "sentence": "Outputs: patches, command outputs, structured errors | Patch locality (changed files/lines per task) | | Evaluation plane | Decide if work is acceptable based on checks | Inputs: build/test/lint resul",
                "words": 29
              },
              {
                "sentence": "Outputs: trace, ledger, artifacts for replay | Reproducibility rate (can rerun and get same pass/fail) | The \u201cminimal contract surface\u201d is the set of interfaces that must be stable for predictability.",
                "words": 30
              },
              {
                "sentence": "A minimal schema sketch: - Required fields: - `path`: absolute or repo-relative file path (must exist unless `create=true`) - `old_str`: exact original text to be replaced (must match uniquely) - `new",
                "words": 48
              },
              {
                "sentence": "- Error contract (examples): - `NOT_FOUND`: `path` does not exist and `create` is false - `NON_UNIQUE_MATCH`: `old_str` matches multiple locations - `NO_MATCH`: `old_str` matches zero locations (stale",
                "words": 41
              },
              {
                "sentence": "Evaluation: measure whether the tool contract is improving outcomes with two task-level metrics: - **Revert rate**: fraction of tasks where the patch is reverted in the next N commits/PR updates.",
                "words": 31
              },
              {
                "sentence": "Fallback gate policy when tests are missing: - If unit tests are absent or non-runnable, the harness should not silently accept \u201clooks good.\u201d - Replace the unit-test requirement with a narrower, expli",
                "words": 67
              },
              {
                "sentence": "- How you notice: many files touched per task, drift into unrelated directories, and regressions discovered after \u201ccompletion.\u201d - Harness fix: enforce patch locality budgets, add path allowlists/denyl",
                "words": 35
              },
              {
                "sentence": "- Harness fix: make gates non-optional for PR-ready output (policy), require artifacts (logs, diff id, check results) attached to the task, and surface \u201cstop reason\u201d when evidence is missing.",
                "words": 30
              }
            ],
            "timestamp": "2026-02-22T15:39:54Z"
          }
        }
      },
      "lifecycle": "draft",
      "path": "book/chapters/02-harness-engineering.md",
      "quality_metrics": {
        "clarity_score": 0.89,
        "drift_score": 0.30103722143195827,
        "example_density": 0.78,
        "failure_mode_presence": true,
        "structure_score": 0.9,
        "tradeoff_presence": true
      },
      "research": {
        "falsifiable": true,
        "hypothesis": "",
        "validation_status": "untested"
      },
      "revision_count": 4,
      "stability": {
        "consecutive_passes": 0,
        "frozen_candidate": false,
        "last_modified_iteration": 4
      },
      "status": "hold"
    },
    "03-autonomous-kernels": {
      "current_iteration": 1,
      "drift_history": [],
      "human_validation": {
        "approved": false,
        "approved_at": null,
        "approved_by": ""
      },
      "iteration_log": [],
      "last_eval": null,
      "lifecycle": "draft",
      "path": "book/chapters/03-autonomous-kernels.md",
      "quality_metrics": {
        "clarity_score": 0.0,
        "drift_score": 0.0,
        "example_density": 0.0,
        "failure_mode_presence": false,
        "structure_score": 0.0,
        "tradeoff_presence": false
      },
      "research": {
        "falsifiable": true,
        "hypothesis": "",
        "validation_status": "untested"
      },
      "revision_count": 1,
      "stability": {
        "consecutive_passes": 0,
        "frozen_candidate": false,
        "last_modified_iteration": 1
      },
      "status": "active_refinement"
    },
    "04-memory-systems": {
      "current_iteration": 1,
      "drift_history": [],
      "human_validation": {
        "approved": false,
        "approved_at": null,
        "approved_by": ""
      },
      "iteration_log": [],
      "last_eval": null,
      "lifecycle": "draft",
      "path": "book/chapters/04-memory-systems.md",
      "quality_metrics": {
        "clarity_score": 0.0,
        "drift_score": 0.0,
        "example_density": 0.0,
        "failure_mode_presence": false,
        "structure_score": 0.0,
        "tradeoff_presence": false
      },
      "research": {
        "falsifiable": true,
        "hypothesis": "",
        "validation_status": "untested"
      },
      "revision_count": 1,
      "stability": {
        "consecutive_passes": 0,
        "frozen_candidate": false,
        "last_modified_iteration": 1
      },
      "status": "locked"
    },
    "05-evaluation-and-traces": {
      "current_iteration": 1,
      "drift_history": [],
      "human_validation": {
        "approved": false,
        "approved_at": null,
        "approved_by": ""
      },
      "iteration_log": [],
      "last_eval": null,
      "lifecycle": "draft",
      "path": "book/chapters/05-evaluation-and-traces.md",
      "quality_metrics": {
        "clarity_score": 0.0,
        "drift_score": 0.0,
        "example_density": 0.0,
        "failure_mode_presence": false,
        "structure_score": 0.0,
        "tradeoff_presence": false
      },
      "research": {
        "falsifiable": true,
        "hypothesis": "",
        "validation_status": "untested"
      },
      "revision_count": 1,
      "stability": {
        "consecutive_passes": 0,
        "frozen_candidate": false,
        "last_modified_iteration": 1
      },
      "status": "locked"
    },
    "06-agent-governance": {
      "current_iteration": 1,
      "drift_history": [],
      "human_validation": {
        "approved": false,
        "approved_at": null,
        "approved_by": ""
      },
      "iteration_log": [],
      "last_eval": null,
      "lifecycle": "draft",
      "path": "book/chapters/06-agent-governance.md",
      "quality_metrics": {
        "clarity_score": 0.0,
        "drift_score": 0.0,
        "example_density": 0.0,
        "failure_mode_presence": false,
        "structure_score": 0.0,
        "tradeoff_presence": false
      },
      "research": {
        "falsifiable": true,
        "hypothesis": "",
        "validation_status": "untested"
      },
      "revision_count": 1,
      "stability": {
        "consecutive_passes": 0,
        "frozen_candidate": false,
        "last_modified_iteration": 1
      },
      "status": "locked"
    },
    "07-production-ai-infrastructure": {
      "current_iteration": 1,
      "drift_history": [],
      "human_validation": {
        "approved": false,
        "approved_at": null,
        "approved_by": ""
      },
      "iteration_log": [],
      "last_eval": null,
      "lifecycle": "draft",
      "path": "book/chapters/07-production-ai-infrastructure.md",
      "quality_metrics": {
        "clarity_score": 0.0,
        "drift_score": 0.0,
        "example_density": 0.0,
        "failure_mode_presence": false,
        "structure_score": 0.0,
        "tradeoff_presence": false
      },
      "research": {
        "falsifiable": true,
        "hypothesis": "",
        "validation_status": "untested"
      },
      "revision_count": 1,
      "stability": {
        "consecutive_passes": 0,
        "frozen_candidate": false,
        "last_modified_iteration": 1
      },
      "status": "locked"
    },
    "99-future-directions": {
      "current_iteration": 1,
      "drift_history": [],
      "human_validation": {
        "approved": false,
        "approved_at": null,
        "approved_by": ""
      },
      "iteration_log": [],
      "last_eval": null,
      "lifecycle": "draft",
      "path": "book/chapters/99-future-directions.md",
      "quality_metrics": {
        "clarity_score": 0.0,
        "drift_score": 0.0,
        "example_density": 0.0,
        "failure_mode_presence": false,
        "structure_score": 0.0,
        "tradeoff_presence": false
      },
      "research": {
        "falsifiable": true,
        "hypothesis": "",
        "validation_status": "untested"
      },
      "revision_count": 1,
      "stability": {
        "consecutive_passes": 0,
        "frozen_candidate": false,
        "last_modified_iteration": 1
      },
      "status": "locked"
    },
    "preface": {
      "current_iteration": 1,
      "drift_history": [],
      "human_validation": {
        "approved": false,
        "approved_at": null,
        "approved_by": ""
      },
      "iteration_log": [],
      "last_eval": null,
      "lifecycle": "draft",
      "path": "book/preface.md",
      "quality_metrics": {
        "clarity_score": 0.0,
        "drift_score": 0.0,
        "example_density": 0.0,
        "failure_mode_presence": false,
        "structure_score": 0.0,
        "tradeoff_presence": false
      },
      "research": {
        "falsifiable": false,
        "hypothesis": "",
        "validation_status": "untested"
      },
      "revision_count": 1,
      "stability": {
        "consecutive_passes": 0,
        "frozen_candidate": false,
        "last_modified_iteration": 1
      },
      "status": "locked"
    }
  },
  "generated_at": "2026-02-19T00:00:00Z",
  "iteration_trace_schema": {
    "agent_task": "string",
    "artifacts": {
      "commit_hash": "string|null",
      "diff_summary": "string"
    },
    "evals": {
      "chapter_quality": "object|null",
      "drift_detection": "object|null",
      "style_guard": "object|null"
    },
    "inputs": {
      "changed_files": "array<string>",
      "notes": "string"
    },
    "iteration": "integer",
    "outcome": {
      "decision": "refine|approve|hold",
      "rationale": "string",
      "status": "drafted|refined|approved|frozen"
    },
    "resource_usage": {
      "completion_tokens": "integer",
      "eval_runtime_ms": "integer",
      "prompt_tokens": "integer"
    },
    "scope": {
      "chapters_modified": "array<string>",
      "governance_modified": "boolean",
      "patterns_modified": "array<string>"
    },
    "timestamp": "ISO-8601 string"
  },
  "repo_iteration_log": [
    {
      "agent_task": "bootstrap scaffolding",
      "artifacts": {
        "commit_hash": "f1788002ca447aab456e314381c5e69fac4d9be7",
        "diff_summary": "Created governance, roadmap, chapter skeletons, patterns, eval definitions, and state scaffolding; refined README and preface."
      },
      "evals": {
        "chapter_quality": {
          "structural_headings": "pass"
        },
        "drift_detection": null,
        "style_guard": null
      },
      "inputs": {
        "changed_files": [
          "README.md",
          "CONSTITUTION.md",
          "AGENTS.md",
          "ROADMAP.md",
          "book/preface.md",
          "book/glossary.md",
          "book/chapters/01-paradigm-shift.md",
          "book/chapters/02-harness-engineering.md",
          "book/chapters/03-autonomous-kernels.md",
          "book/chapters/04-memory-systems.md",
          "book/chapters/05-evaluation-and-traces.md",
          "book/chapters/06-agent-governance.md",
          "book/chapters/07-production-ai-infrastructure.md",
          "book/chapters/99-future-directions.md",
          "book/patterns/minimal-agent-loop.md",
          "book/patterns/self-verification-loop.md",
          "book/patterns/harness-design-patterns.md",
          "book/patterns/memory-architectures.md",
          "evals/chapter-quality.yaml",
          "evals/style-guard.yaml",
          "evals/drift-detection.yaml",
          "state/ledger.json",
          "state/version_map.json",
          "state/metrics.json"
        ],
        "notes": "Initial repository bootstrap per prompts/bootstrap.md. Evidence collected: chapter heading structural check passed; hype keyword scan found hits only inside eval configuration."
      },
      "iteration": 1,
      "outcome": {
        "decision": "approve",
        "rationale": "All required scaffold files exist; chapter skeletons include the required sections; governance and eval definitions are in place.",
        "status": "drafted"
      },
      "resource_usage": {
        "completion_tokens": 0,
        "eval_runtime_ms": 0,
        "prompt_tokens": 0
      },
      "scope": {
        "chapters_modified": [
          "preface",
          "01-paradigm-shift",
          "02-harness-engineering",
          "03-autonomous-kernels",
          "04-memory-systems",
          "05-evaluation-and-traces",
          "06-agent-governance",
          "07-production-ai-infrastructure",
          "99-future-directions"
        ],
        "governance_modified": true,
        "patterns_modified": [
          "minimal-agent-loop",
          "self-verification-loop",
          "harness-design-patterns",
          "memory-architectures"
        ]
      },
      "timestamp": "2026-02-18T23:05:36Z"
    },
    {
      "agent_task": "kernel_refine",
      "artifacts": {
        "commit_hash": null,
        "diff_summary": "diff_ratio=0.00; drift_score=0.00"
      },
      "evals": {
        "chapter_quality": {
          "forbidden_hits": [],
          "pass": true,
          "required_missing": [],
          "scores": {
            "examples_count": 1.0,
            "failure_modes": 1.0,
            "system_breakdown": 1.0,
            "thesis_clarity": 1.0,
            "tradeoffs": 1.0
          },
          "timestamp": "2026-02-21T15:34:35Z",
          "total": 1.0
        },
        "drift_detection": {
          "drift_metrics": {
            "anchor_deltas": {
              "agent": 0.0,
              "harness": 0.0,
              "model": 0.0
            },
            "cross_chapter_similarity_hits": []
          },
          "hype_hits": [],
          "pass": true,
          "repetition_metrics": {
            "duplicate_sentence_ratio": 0.0,
            "near_duplicate_ngram_ratio": 0.0
          },
          "timestamp": "2026-02-21T15:34:35Z"
        },
        "style_guard": {
          "adjective_density": 0.0893371757925072,
          "forbidden_hits": [],
          "pass": true,
          "sentence_length_violations": [
            {
              "sentence": "# Chapter 01 \u2014 Paradigm Shift ## Thesis AI-first software engineering is an architectural inversion: machine reasoning becomes a primary execution substrate, and the harness (tools, constraints, evalu",
              "words": 32
            }
          ],
          "timestamp": "2026-02-21T15:34:35Z"
        }
      },
      "inputs": {
        "changed_files": [
          "book/chapters/01-paradigm-shift.md",
          "state/ledger.json",
          "state/metrics.json"
        ],
        "notes": "Kernel refinement iteration 2 for 01-paradigm-shift"
      },
      "iteration": 2,
      "outcome": {
        "decision": "refine",
        "rationale": "Deterministic eval + critic decision gating.",
        "status": "refine"
      },
      "resource_usage": {
        "completion_tokens": 0,
        "eval_runtime_ms": 0,
        "prompt_tokens": 0
      },
      "scope": {
        "chapters_modified": [
          "01-paradigm-shift"
        ],
        "governance_modified": false,
        "patterns_modified": []
      },
      "timestamp": "2026-02-21T15:34:35Z"
    },
    {
      "agent_task": "kernel_refine",
      "artifacts": {
        "commit_hash": null,
        "diff_summary": "diff_ratio=0.00; drift_score=0.00"
      },
      "evals": {
        "chapter_quality": {
          "forbidden_hits": [],
          "pass": true,
          "required_missing": [],
          "scores": {
            "examples_count": 1.0,
            "failure_modes": 1.0,
            "system_breakdown": 1.0,
            "thesis_clarity": 1.0,
            "tradeoffs": 1.0
          },
          "timestamp": "2026-02-21T15:41:04Z",
          "total": 1.0
        },
        "drift_detection": {
          "drift_metrics": {
            "anchor_deltas": {
              "agent": 0.0,
              "harness": 0.0,
              "model": 0.0
            },
            "cross_chapter_similarity_hits": []
          },
          "hype_hits": [],
          "pass": true,
          "repetition_metrics": {
            "duplicate_sentence_ratio": 0.0,
            "near_duplicate_ngram_ratio": 0.0
          },
          "timestamp": "2026-02-21T15:41:04Z"
        },
        "style_guard": {
          "adjective_density": 0.0893371757925072,
          "forbidden_hits": [],
          "pass": true,
          "sentence_length_violations": [
            {
              "sentence": "# Chapter 01 \u2014 Paradigm Shift ## Thesis AI-first software engineering is an architectural inversion: machine reasoning becomes a primary execution substrate, and the harness (tools, constraints, evalu",
              "words": 32
            }
          ],
          "timestamp": "2026-02-21T15:41:04Z"
        }
      },
      "inputs": {
        "changed_files": [
          "book/chapters/01-paradigm-shift.md",
          "state/ledger.json",
          "state/metrics.json"
        ],
        "notes": "Kernel refinement iteration 3 for 01-paradigm-shift"
      },
      "iteration": 3,
      "outcome": {
        "decision": "refine",
        "rationale": "Deterministic eval + critic decision gating.",
        "status": "refine"
      },
      "resource_usage": {
        "completion_tokens": 0,
        "eval_runtime_ms": 0,
        "prompt_tokens": 0
      },
      "scope": {
        "chapters_modified": [
          "01-paradigm-shift"
        ],
        "governance_modified": false,
        "patterns_modified": []
      },
      "timestamp": "2026-02-21T15:41:04Z"
    },
    {
      "agent_task": "kernel_refine",
      "artifacts": {
        "commit_hash": null,
        "diff_summary": "diff_ratio=0.00; drift_score=0.00"
      },
      "evals": {
        "chapter_quality": {
          "forbidden_hits": [],
          "pass": true,
          "required_missing": [],
          "scores": {
            "examples_count": 1.0,
            "failure_modes": 1.0,
            "system_breakdown": 1.0,
            "thesis_clarity": 1.0,
            "tradeoffs": 1.0
          },
          "timestamp": "2026-02-21T15:41:04Z",
          "total": 1.0
        },
        "drift_detection": {
          "drift_metrics": {
            "anchor_deltas": {
              "agent": 0.0,
              "harness": 0.0,
              "model": 0.0
            },
            "cross_chapter_similarity_hits": []
          },
          "hype_hits": [],
          "pass": true,
          "repetition_metrics": {
            "duplicate_sentence_ratio": 0.0,
            "near_duplicate_ngram_ratio": 0.0
          },
          "timestamp": "2026-02-21T15:41:04Z"
        },
        "style_guard": {
          "adjective_density": 0.0893371757925072,
          "forbidden_hits": [],
          "pass": true,
          "sentence_length_violations": [
            {
              "sentence": "# Chapter 01 \u2014 Paradigm Shift ## Thesis AI-first software engineering is an architectural inversion: machine reasoning becomes a primary execution substrate, and the harness (tools, constraints, evalu",
              "words": 32
            }
          ],
          "timestamp": "2026-02-21T15:41:04Z"
        }
      },
      "inputs": {
        "changed_files": [
          "book/chapters/01-paradigm-shift.md",
          "state/ledger.json",
          "state/metrics.json"
        ],
        "notes": "Kernel refinement iteration 4 for 01-paradigm-shift"
      },
      "iteration": 4,
      "outcome": {
        "decision": "refine",
        "rationale": "Deterministic eval + critic decision gating.",
        "status": "refine"
      },
      "resource_usage": {
        "completion_tokens": 0,
        "eval_runtime_ms": 0,
        "prompt_tokens": 0
      },
      "scope": {
        "chapters_modified": [
          "01-paradigm-shift"
        ],
        "governance_modified": false,
        "patterns_modified": []
      },
      "timestamp": "2026-02-21T15:41:04Z"
    },
    {
      "agent_task": "kernel_refine",
      "artifacts": {
        "commit_hash": null,
        "diff_summary": "diff_ratio=0.00; drift_score=0.00"
      },
      "evals": {
        "chapter_quality": {
          "forbidden_hits": [],
          "pass": true,
          "required_missing": [],
          "scores": {
            "examples_count": 1.0,
            "failure_modes": 1.0,
            "system_breakdown": 1.0,
            "thesis_clarity": 1.0,
            "tradeoffs": 1.0
          },
          "timestamp": "2026-02-21T15:41:04Z",
          "total": 1.0
        },
        "drift_detection": {
          "drift_metrics": {
            "anchor_deltas": {
              "agent": 0.0,
              "harness": 0.0,
              "model": 0.0
            },
            "cross_chapter_similarity_hits": []
          },
          "hype_hits": [],
          "pass": true,
          "repetition_metrics": {
            "duplicate_sentence_ratio": 0.0,
            "near_duplicate_ngram_ratio": 0.0
          },
          "timestamp": "2026-02-21T15:41:04Z"
        },
        "style_guard": {
          "adjective_density": 0.0893371757925072,
          "forbidden_hits": [],
          "pass": true,
          "sentence_length_violations": [
            {
              "sentence": "# Chapter 01 \u2014 Paradigm Shift ## Thesis AI-first software engineering is an architectural inversion: machine reasoning becomes a primary execution substrate, and the harness (tools, constraints, evalu",
              "words": 32
            }
          ],
          "timestamp": "2026-02-21T15:41:04Z"
        }
      },
      "inputs": {
        "changed_files": [
          "book/chapters/01-paradigm-shift.md",
          "state/ledger.json",
          "state/metrics.json"
        ],
        "notes": "Kernel refinement iteration 5 for 01-paradigm-shift"
      },
      "iteration": 5,
      "outcome": {
        "decision": "refine",
        "rationale": "Deterministic eval + critic decision gating.",
        "status": "refine"
      },
      "resource_usage": {
        "completion_tokens": 0,
        "eval_runtime_ms": 0,
        "prompt_tokens": 0
      },
      "scope": {
        "chapters_modified": [
          "01-paradigm-shift"
        ],
        "governance_modified": false,
        "patterns_modified": []
      },
      "timestamp": "2026-02-21T15:41:04Z"
    },
    {
      "agent_task": "kernel_refine",
      "artifacts": {
        "commit_hash": null,
        "diff_summary": "diff_ratio=0.00; drift_score=0.00"
      },
      "evals": {
        "chapter_quality": {
          "forbidden_hits": [],
          "pass": true,
          "required_missing": [],
          "scores": {
            "examples_count": 1.0,
            "failure_modes": 1.0,
            "system_breakdown": 1.0,
            "thesis_clarity": 1.0,
            "tradeoffs": 1.0
          },
          "timestamp": "2026-02-22T15:23:29Z",
          "total": 1.0
        },
        "drift_detection": {
          "drift_metrics": {
            "anchor_deltas": {
              "agent": 0.0,
              "harness": 0.0,
              "model": 0.0
            },
            "cross_chapter_similarity_hits": []
          },
          "hype_hits": [],
          "pass": true,
          "repetition_metrics": {
            "duplicate_sentence_ratio": 0.0,
            "near_duplicate_ngram_ratio": 0.0
          },
          "timestamp": "2026-02-22T15:23:29Z"
        },
        "style_guard": {
          "adjective_density": 0.0893371757925072,
          "forbidden_hits": [],
          "pass": true,
          "sentence_length_violations": [
            {
              "sentence": "# Chapter 01 \u2014 Paradigm Shift ## Thesis AI-first software engineering is an architectural inversion: machine reasoning becomes a primary execution substrate, and the harness (tools, constraints, evalu",
              "words": 32
            }
          ],
          "timestamp": "2026-02-22T15:23:29Z"
        }
      },
      "inputs": {
        "changed_files": [
          "book/chapters/01-paradigm-shift.md",
          "state/ledger.json",
          "state/metrics.json"
        ],
        "notes": "Kernel refinement iteration 6 for 01-paradigm-shift"
      },
      "iteration": 6,
      "outcome": {
        "decision": "refine",
        "rationale": "Deterministic eval + critic decision gating.",
        "status": "refine"
      },
      "resource_usage": {
        "completion_tokens": 0,
        "eval_runtime_ms": 0,
        "prompt_tokens": 0
      },
      "scope": {
        "chapters_modified": [
          "01-paradigm-shift"
        ],
        "governance_modified": false,
        "patterns_modified": []
      },
      "timestamp": "2026-02-22T15:23:29Z"
    },
    {
      "agent_task": "kernel_refine",
      "artifacts": {
        "commit_hash": null,
        "diff_summary": "diff_ratio=0.00; drift_score=0.00"
      },
      "evals": {
        "chapter_quality": {
          "forbidden_hits": [],
          "pass": true,
          "required_missing": [],
          "scores": {
            "examples_count": 1.0,
            "failure_modes": 1.0,
            "system_breakdown": 1.0,
            "thesis_clarity": 1.0,
            "tradeoffs": 1.0
          },
          "timestamp": "2026-02-22T15:27:47Z",
          "total": 1.0
        },
        "drift_detection": {
          "drift_metrics": {
            "anchor_deltas": {
              "agent": 0.0,
              "harness": 0.0,
              "model": 0.0
            },
            "cross_chapter_similarity_hits": []
          },
          "hype_hits": [],
          "pass": true,
          "repetition_metrics": {
            "duplicate_sentence_ratio": 0.0,
            "near_duplicate_ngram_ratio": 0.0
          },
          "timestamp": "2026-02-22T15:27:47Z"
        },
        "style_guard": {
          "adjective_density": 0.0893371757925072,
          "forbidden_hits": [],
          "pass": true,
          "sentence_length_violations": [
            {
              "sentence": "# Chapter 01 \u2014 Paradigm Shift ## Thesis AI-first software engineering is an architectural inversion: machine reasoning becomes a primary execution substrate, and the harness (tools, constraints, evalu",
              "words": 32
            }
          ],
          "timestamp": "2026-02-22T15:27:47Z"
        }
      },
      "inputs": {
        "changed_files": [
          "book/chapters/01-paradigm-shift.md",
          "state/ledger.json",
          "state/metrics.json"
        ],
        "notes": "Kernel refinement iteration 7 for 01-paradigm-shift"
      },
      "iteration": 7,
      "outcome": {
        "decision": "refine",
        "rationale": "Deterministic eval + critic decision gating.",
        "status": "refine"
      },
      "resource_usage": {
        "completion_tokens": 0,
        "eval_runtime_ms": 0,
        "prompt_tokens": 0
      },
      "scope": {
        "chapters_modified": [
          "01-paradigm-shift"
        ],
        "governance_modified": false,
        "patterns_modified": []
      },
      "timestamp": "2026-02-22T15:27:47Z"
    },
    {
      "agent_task": "kernel_refine",
      "artifacts": {
        "commit_hash": null,
        "diff_summary": "diff_ratio=0.87; drift_score=0.31"
      },
      "evals": {
        "chapter_quality": {
          "forbidden_hits": [],
          "pass": true,
          "required_missing": [],
          "scores": {
            "examples_count": 1.0,
            "failure_modes": 1.0,
            "system_breakdown": 1.0,
            "thesis_clarity": 1.0,
            "tradeoffs": 1.0
          },
          "timestamp": "2026-02-22T15:31:36Z",
          "total": 1.0
        },
        "drift_detection": {
          "drift_metrics": {
            "anchor_deltas": {
              "agent": 0.0,
              "harness": 0.5154639175257731,
              "model": 0.5487804878048781
            },
            "cross_chapter_similarity_hits": []
          },
          "hype_hits": [],
          "pass": false,
          "repetition_metrics": {
            "duplicate_sentence_ratio": 0.0,
            "near_duplicate_ngram_ratio": 0.005931198102016607
          },
          "timestamp": "2026-02-22T15:31:36Z"
        },
        "style_guard": {
          "adjective_density": 0.07201889020070838,
          "forbidden_hits": [],
          "pass": true,
          "sentence_length_violations": [
            {
              "sentence": "# Chapter 01 \u2014 Paradigm Shift ## Thesis AI-first software engineering is an architectural inversion: machine reasoning becomes a primary execution substrate, and the harness (tools, constraints, evalu",
              "words": 32
            },
            {
              "sentence": "Operational definition: **model capability** is what changes when you swap models while holding tools, constraints, and evaluation constant; **harness capability** is what changes when you keep the mo",
              "words": 38
            },
            {
              "sentence": "- **Attribution checklist** (what evidence makes a failure \u201cbelong\u201d to a layer): - **Spec/prompt**: requirement is ambiguous or contradictory; different reasonable interpretations change expected outp",
              "words": 32
            },
            {
              "sentence": "- **Eval/CI**: mismatch between what is asserted and what is intended; tests are incorrect, overly strict, or missing a required case; fixing the test changes outcomes without changing product behavio",
              "words": 30
            },
            {
              "sentence": "- If the loop reaches a fixed budget (e.g., N iterations or T minutes) without progress, stop and escalate to a human with the trace and the smallest reproducible failing case.",
              "words": 31
            }
          ],
          "timestamp": "2026-02-22T15:31:36Z"
        }
      },
      "inputs": {
        "changed_files": [
          "book/chapters/01-paradigm-shift.md",
          "state/ledger.json",
          "state/metrics.json"
        ],
        "notes": "Kernel refinement iteration 8 for 01-paradigm-shift"
      },
      "iteration": 8,
      "outcome": {
        "decision": "refine",
        "rationale": "Deterministic eval + critic decision gating.",
        "status": "refine"
      },
      "resource_usage": {
        "completion_tokens": 0,
        "eval_runtime_ms": 0,
        "prompt_tokens": 0
      },
      "scope": {
        "chapters_modified": [
          "01-paradigm-shift"
        ],
        "governance_modified": false,
        "patterns_modified": []
      },
      "timestamp": "2026-02-22T15:31:36Z"
    },
    {
      "agent_task": "kernel_refine",
      "artifacts": {
        "commit_hash": null,
        "diff_summary": "diff_ratio=0.17; drift_score=0.32"
      },
      "evals": {
        "chapter_quality": {
          "forbidden_hits": [],
          "pass": true,
          "required_missing": [],
          "scores": {
            "examples_count": 1.0,
            "failure_modes": 1.0,
            "system_breakdown": 1.0,
            "thesis_clarity": 1.0,
            "tradeoffs": 1.0
          },
          "timestamp": "2026-02-22T15:32:35Z",
          "total": 1.0
        },
        "drift_detection": {
          "drift_metrics": {
            "anchor_deltas": {
              "agent": 0.0,
              "harness": 0.5154639175257731,
              "model": 0.5542168674698795
            },
            "cross_chapter_similarity_hits": []
          },
          "hype_hits": [],
          "pass": false,
          "repetition_metrics": {
            "duplicate_sentence_ratio": 0.0,
            "near_duplicate_ngram_ratio": 0.014223194748358862
          },
          "timestamp": "2026-02-22T15:32:35Z"
        },
        "style_guard": {
          "adjective_density": 0.07080610021786492,
          "forbidden_hits": [],
          "pass": true,
          "sentence_length_violations": [
            {
              "sentence": "# Chapter 01 \u2014 Paradigm Shift ## Thesis AI-first software engineering is an architectural inversion: machine reasoning becomes a primary execution substrate, and the harness (tools, constraints, evalu",
              "words": 32
            },
            {
              "sentence": "- **Attribution checklist** (what evidence makes a failure \u201cbelong\u201d to a layer): - **Spec/prompt**: requirement is ambiguous or contradictory; different reasonable interpretations change expected outp",
              "words": 32
            },
            {
              "sentence": "- **Eval/CI**: mismatch between what is asserted and what is intended; tests are incorrect, overly strict, or missing a required case; fixing the test changes outcomes without changing product behavio",
              "words": 30
            },
            {
              "sentence": "- If the loop reaches a fixed budget (e.g., N iterations or T minutes) without progress, stop and escalate to a human with the trace and the smallest reproducible failing case.",
              "words": 31
            }
          ],
          "timestamp": "2026-02-22T15:32:35Z"
        }
      },
      "inputs": {
        "changed_files": [
          "book/chapters/01-paradigm-shift.md",
          "state/ledger.json",
          "state/metrics.json"
        ],
        "notes": "Kernel refinement iteration 9 for 01-paradigm-shift"
      },
      "iteration": 9,
      "outcome": {
        "decision": "refine",
        "rationale": "Deterministic eval + critic decision gating.",
        "status": "refine"
      },
      "resource_usage": {
        "completion_tokens": 6549,
        "eval_runtime_ms": 0,
        "prompt_tokens": 120377
      },
      "scope": {
        "chapters_modified": [
          "01-paradigm-shift"
        ],
        "governance_modified": false,
        "patterns_modified": []
      },
      "timestamp": "2026-02-22T15:32:35Z"
    },
    {
      "agent_task": "kernel_refine",
      "artifacts": {
        "commit_hash": null,
        "diff_summary": "diff_ratio=0.05; drift_score=0.32"
      },
      "evals": {
        "chapter_quality": {
          "forbidden_hits": [],
          "pass": true,
          "required_missing": [],
          "scores": {
            "examples_count": 1.0,
            "failure_modes": 1.0,
            "system_breakdown": 1.0,
            "thesis_clarity": 1.0,
            "tradeoffs": 1.0
          },
          "timestamp": "2026-02-22T15:33:13Z",
          "total": 1.0
        },
        "drift_detection": {
          "drift_metrics": {
            "anchor_deltas": {
              "agent": 0.0,
              "harness": 0.47777777777777775,
              "model": 0.5256410256410257
            },
            "cross_chapter_similarity_hits": []
          },
          "hype_hits": [],
          "pass": false,
          "repetition_metrics": {
            "duplicate_sentence_ratio": 0.0,
            "near_duplicate_ngram_ratio": 0.015011547344110854
          },
          "timestamp": "2026-02-22T15:33:13Z"
        },
        "style_guard": {
          "adjective_density": 0.07011494252873564,
          "forbidden_hits": [],
          "pass": true,
          "sentence_length_violations": [
            {
              "sentence": "# Chapter 01 \u2014 Paradigm Shift ## Thesis AI-first software engineering is an architectural inversion: machine reasoning becomes a primary execution substrate, and the harness (tools, constraints, evalu",
              "words": 32
            },
            {
              "sentence": "- **Attribution checklist** (what evidence makes a failure \u201cbelong\u201d to a layer): - **Spec/prompt**: requirement is ambiguous or contradictory; different reasonable interpretations change expected outp",
              "words": 32
            },
            {
              "sentence": "- **Eval/CI**: mismatch between what is asserted and what is intended; tests are incorrect, overly strict, or missing a required case; fixing the test changes outcomes without changing product behavio",
              "words": 30
            },
            {
              "sentence": "- If the loop reaches a fixed budget (e.g., N iterations or T minutes) without progress, stop and escalate to a human with the trace and the smallest reproducible failing case.",
              "words": 31
            }
          ],
          "timestamp": "2026-02-22T15:33:13Z"
        }
      },
      "inputs": {
        "changed_files": [
          "book/chapters/01-paradigm-shift.md",
          "state/ledger.json",
          "state/metrics.json"
        ],
        "notes": "Kernel refinement iteration 10 for 01-paradigm-shift"
      },
      "iteration": 10,
      "outcome": {
        "decision": "refine",
        "rationale": "Deterministic eval + critic decision gating.",
        "status": "refine"
      },
      "resource_usage": {
        "completion_tokens": 16361,
        "eval_runtime_ms": 0,
        "prompt_tokens": 359695
      },
      "scope": {
        "chapters_modified": [
          "01-paradigm-shift"
        ],
        "governance_modified": false,
        "patterns_modified": []
      },
      "timestamp": "2026-02-22T15:33:13Z"
    },
    {
      "agent_task": "kernel_refine",
      "artifacts": {
        "commit_hash": null,
        "diff_summary": "diff_ratio=1.00; drift_score=0.30"
      },
      "evals": {
        "chapter_quality": {
          "forbidden_hits": [],
          "pass": true,
          "required_missing": [],
          "scores": {
            "examples_count": 1.0,
            "failure_modes": 1.0,
            "system_breakdown": 1.0,
            "thesis_clarity": 1.0,
            "tradeoffs": 1.0
          },
          "timestamp": "2026-02-22T15:38:24Z",
          "total": 1.0
        },
        "drift_detection": {
          "drift_metrics": {
            "anchor_deltas": {
              "agent": 0.8823529411764706,
              "harness": 0.6358024691358024,
              "model": 0.29032258064516125
            },
            "cross_chapter_similarity_hits": []
          },
          "hype_hits": [],
          "pass": false,
          "repetition_metrics": {
            "duplicate_sentence_ratio": 0.0,
            "near_duplicate_ngram_ratio": 0.000708215297450425
          },
          "timestamp": "2026-02-22T15:38:24Z"
        },
        "style_guard": {
          "adjective_density": 0.0614406779661017,
          "forbidden_hits": [],
          "pass": false,
          "sentence_length_violations": [
            {
              "sentence": "# Chapter 02 \u2014 Harness Engineering ## Thesis Harness engineering is the discipline of turning a general-purpose model into a predictable system by defining tool contracts, constraints, loop control, a",
              "words": 30
            },
            {
              "sentence": "In this chapter, \u201cpredictable\u201d means three things: the same input context tends to produce the same classes of actions (repeatability), the system\u2019s allowed changes are bounded by explicit constraints",
              "words": 45
            },
            {
              "sentence": "Hypothesis (falsifiable): for a fixed set of tasks and repositories, tightening the harness (schemas, budgets, gates, and recovery rules) reduces regression rate and rework more than swapping between ",
              "words": 38
            },
            {
              "sentence": "A useful way to operationalize the planes is to name what each plane consumes, what it produces, and one metric you can track: | Plane | Responsibilities | Key artifacts (inputs/outputs) | One measura",
              "words": 53
            },
            {
              "sentence": "Outputs: patches, command outputs, structured errors | Patch locality (changed files/lines per task) | | Evaluation plane | Decide if work is acceptable based on checks | Inputs: build/test/lint resul",
              "words": 29
            },
            {
              "sentence": "Outputs: trace, ledger, artifacts for replay | Reproducibility rate (can rerun and get same pass/fail) | The \u201cminimal contract surface\u201d is the set of interfaces that must be stable for predictability:",
              "words": 54
            },
            {
              "sentence": "A minimal schema sketch: - Required fields: - `path`: absolute or repo-relative file path (must exist unless `create=true`) - `old_str`: exact original text to be replaced (must match uniquely) - `new",
              "words": 48
            },
            {
              "sentence": "- Error contract (examples): - `NOT_FOUND`: `path` does not exist and `create` is false - `NON_UNIQUE_MATCH`: `old_str` matches multiple locations - `NO_MATCH`: `old_str` matches zero locations (stale",
              "words": 41
            },
            {
              "sentence": "Evaluation: measure whether the tool contract is improving outcomes with two task-level metrics: - **Revert rate**: fraction of tasks where the patch is reverted in the next N commits/PR updates.",
              "words": 31
            },
            {
              "sentence": "Fallback gate policy when tests are missing: - If unit tests are absent or non-runnable, the harness should not silently accept \u201clooks good.\u201d - Replace the unit-test requirement with a narrower, expli",
              "words": 67
            },
            {
              "sentence": "- How you notice: many files touched per task, drift into unrelated directories, and regressions discovered after \u201ccompletion.\u201d - Harness fix: enforce patch locality budgets, add path allowlists/denyl",
              "words": 35
            },
            {
              "sentence": "- Harness fix: make gates non-optional for PR-ready output (policy), require artifacts (logs, diff id, check results) attached to the task, and surface \u201cstop reason\u201d when evidence is missing.",
              "words": 30
            }
          ],
          "timestamp": "2026-02-22T15:38:24Z"
        }
      },
      "inputs": {
        "changed_files": [
          "book/chapters/02-harness-engineering.md",
          "state/ledger.json",
          "state/metrics.json"
        ],
        "notes": "Kernel refinement iteration 2 for 02-harness-engineering"
      },
      "iteration": 11,
      "outcome": {
        "decision": "refine",
        "rationale": "Deterministic eval + critic decision gating.",
        "status": "refine"
      },
      "resource_usage": {
        "completion_tokens": 0,
        "eval_runtime_ms": 0,
        "prompt_tokens": 0
      },
      "scope": {
        "chapters_modified": [
          "02-harness-engineering"
        ],
        "governance_modified": false,
        "patterns_modified": []
      },
      "timestamp": "2026-02-22T15:38:24Z"
    },
    {
      "agent_task": "kernel_refine",
      "artifacts": {
        "commit_hash": null,
        "diff_summary": "diff_ratio=0.03; drift_score=0.30"
      },
      "evals": {
        "chapter_quality": {
          "forbidden_hits": [],
          "pass": true,
          "required_missing": [],
          "scores": {
            "examples_count": 1.0,
            "failure_modes": 1.0,
            "system_breakdown": 1.0,
            "thesis_clarity": 1.0,
            "tradeoffs": 1.0
          },
          "timestamp": "2026-02-22T15:39:12Z",
          "total": 1.0
        },
        "drift_detection": {
          "drift_metrics": {
            "anchor_deltas": {
              "agent": 0.8823529411764706,
              "harness": 0.6358024691358024,
              "model": 0.29032258064516125
            },
            "cross_chapter_similarity_hits": []
          },
          "hype_hits": [],
          "pass": false,
          "repetition_metrics": {
            "duplicate_sentence_ratio": 0.0,
            "near_duplicate_ngram_ratio": 0.0007057163020465773
          },
          "timestamp": "2026-02-22T15:39:12Z"
        },
        "style_guard": {
          "adjective_density": 0.061224489795918366,
          "forbidden_hits": [],
          "pass": false,
          "sentence_length_violations": [
            {
              "sentence": "# Chapter 02 \u2014 Harness Engineering ## Thesis Harness engineering is the discipline of turning a general-purpose model into a predictable system by defining tool contracts, constraints, loop control, a",
              "words": 30
            },
            {
              "sentence": "Hypothesis (falsifiable): for a fixed set of tasks and repositories, tightening the harness (schemas, budgets, gates, and recovery rules) reduces regression rate and rework more than swapping between ",
              "words": 38
            },
            {
              "sentence": "A useful way to operationalize the planes is to name what each plane consumes, what it produces, and one metric you can track: | Plane | Responsibilities | Key artifacts (inputs/outputs) | One measura",
              "words": 53
            },
            {
              "sentence": "Outputs: patches, command outputs, structured errors | Patch locality (changed files/lines per task) | | Evaluation plane | Decide if work is acceptable based on checks | Inputs: build/test/lint resul",
              "words": 29
            },
            {
              "sentence": "Outputs: trace, ledger, artifacts for replay | Reproducibility rate (can rerun and get same pass/fail) | The \u201cminimal contract surface\u201d is the set of interfaces that must be stable for predictability:",
              "words": 54
            },
            {
              "sentence": "A minimal schema sketch: - Required fields: - `path`: absolute or repo-relative file path (must exist unless `create=true`) - `old_str`: exact original text to be replaced (must match uniquely) - `new",
              "words": 48
            },
            {
              "sentence": "- Error contract (examples): - `NOT_FOUND`: `path` does not exist and `create` is false - `NON_UNIQUE_MATCH`: `old_str` matches multiple locations - `NO_MATCH`: `old_str` matches zero locations (stale",
              "words": 41
            },
            {
              "sentence": "Evaluation: measure whether the tool contract is improving outcomes with two task-level metrics: - **Revert rate**: fraction of tasks where the patch is reverted in the next N commits/PR updates.",
              "words": 31
            },
            {
              "sentence": "Fallback gate policy when tests are missing: - If unit tests are absent or non-runnable, the harness should not silently accept \u201clooks good.\u201d - Replace the unit-test requirement with a narrower, expli",
              "words": 67
            },
            {
              "sentence": "- How you notice: many files touched per task, drift into unrelated directories, and regressions discovered after \u201ccompletion.\u201d - Harness fix: enforce patch locality budgets, add path allowlists/denyl",
              "words": 35
            },
            {
              "sentence": "- Harness fix: make gates non-optional for PR-ready output (policy), require artifacts (logs, diff id, check results) attached to the task, and surface \u201cstop reason\u201d when evidence is missing.",
              "words": 30
            }
          ],
          "timestamp": "2026-02-22T15:39:12Z"
        }
      },
      "inputs": {
        "changed_files": [
          "book/chapters/02-harness-engineering.md",
          "state/ledger.json",
          "state/metrics.json"
        ],
        "notes": "Kernel refinement iteration 3 for 02-harness-engineering"
      },
      "iteration": 12,
      "outcome": {
        "decision": "refine",
        "rationale": "Deterministic eval + critic decision gating.",
        "status": "refine"
      },
      "resource_usage": {
        "completion_tokens": 6162,
        "eval_runtime_ms": 0,
        "prompt_tokens": 130266
      },
      "scope": {
        "chapters_modified": [
          "02-harness-engineering"
        ],
        "governance_modified": false,
        "patterns_modified": []
      },
      "timestamp": "2026-02-22T15:39:12Z"
    },
    {
      "agent_task": "kernel_refine",
      "artifacts": {
        "commit_hash": null,
        "diff_summary": "diff_ratio=0.03; drift_score=0.30"
      },
      "evals": {
        "chapter_quality": {
          "forbidden_hits": [],
          "pass": true,
          "required_missing": [],
          "scores": {
            "examples_count": 1.0,
            "failure_modes": 1.0,
            "system_breakdown": 1.0,
            "thesis_clarity": 1.0,
            "tradeoffs": 1.0
          },
          "timestamp": "2026-02-22T15:39:54Z",
          "total": 1.0
        },
        "drift_detection": {
          "drift_metrics": {
            "anchor_deltas": {
              "agent": 0.8823529411764706,
              "harness": 0.6358024691358024,
              "model": 0.29032258064516125
            },
            "cross_chapter_similarity_hits": []
          },
          "hype_hits": [],
          "pass": false,
          "repetition_metrics": {
            "duplicate_sentence_ratio": 0.0,
            "near_duplicate_ngram_ratio": 0.0007112375533428165
          },
          "timestamp": "2026-02-22T15:39:54Z"
        },
        "style_guard": {
          "adjective_density": 0.06170212765957447,
          "forbidden_hits": [],
          "pass": false,
          "sentence_length_violations": [
            {
              "sentence": "# Chapter 02 \u2014 Harness Engineering ## Thesis Harness engineering is the discipline of turning a general-purpose model into a predictable system by defining tool contracts, constraints, loop control, a",
              "words": 30
            },
            {
              "sentence": "Hypothesis (falsifiable): for a fixed set of tasks and repositories, tightening the harness (schemas, budgets, gates, and recovery rules) reduces regression rate and rework more than swapping between ",
              "words": 32
            },
            {
              "sentence": "A useful way to operationalize the planes is to name what each plane consumes, what it produces, and one metric you can track: | Plane | Responsibilities | Key artifacts (inputs/outputs) | One measura",
              "words": 53
            },
            {
              "sentence": "Outputs: patches, command outputs, structured errors | Patch locality (changed files/lines per task) | | Evaluation plane | Decide if work is acceptable based on checks | Inputs: build/test/lint resul",
              "words": 29
            },
            {
              "sentence": "Outputs: trace, ledger, artifacts for replay | Reproducibility rate (can rerun and get same pass/fail) | The \u201cminimal contract surface\u201d is the set of interfaces that must be stable for predictability.",
              "words": 30
            },
            {
              "sentence": "A minimal schema sketch: - Required fields: - `path`: absolute or repo-relative file path (must exist unless `create=true`) - `old_str`: exact original text to be replaced (must match uniquely) - `new",
              "words": 48
            },
            {
              "sentence": "- Error contract (examples): - `NOT_FOUND`: `path` does not exist and `create` is false - `NON_UNIQUE_MATCH`: `old_str` matches multiple locations - `NO_MATCH`: `old_str` matches zero locations (stale",
              "words": 41
            },
            {
              "sentence": "Evaluation: measure whether the tool contract is improving outcomes with two task-level metrics: - **Revert rate**: fraction of tasks where the patch is reverted in the next N commits/PR updates.",
              "words": 31
            },
            {
              "sentence": "Fallback gate policy when tests are missing: - If unit tests are absent or non-runnable, the harness should not silently accept \u201clooks good.\u201d - Replace the unit-test requirement with a narrower, expli",
              "words": 67
            },
            {
              "sentence": "- How you notice: many files touched per task, drift into unrelated directories, and regressions discovered after \u201ccompletion.\u201d - Harness fix: enforce patch locality budgets, add path allowlists/denyl",
              "words": 35
            },
            {
              "sentence": "- Harness fix: make gates non-optional for PR-ready output (policy), require artifacts (logs, diff id, check results) attached to the task, and surface \u201cstop reason\u201d when evidence is missing.",
              "words": 30
            }
          ],
          "timestamp": "2026-02-22T15:39:54Z"
        }
      },
      "inputs": {
        "changed_files": [
          "book/chapters/02-harness-engineering.md",
          "state/ledger.json",
          "state/metrics.json"
        ],
        "notes": "Kernel refinement iteration 4 for 02-harness-engineering"
      },
      "iteration": 13,
      "outcome": {
        "decision": "refine",
        "rationale": "Deterministic eval + critic decision gating.",
        "status": "refine"
      },
      "resource_usage": {
        "completion_tokens": 14983,
        "eval_runtime_ms": 0,
        "prompt_tokens": 409372
      },
      "scope": {
        "chapters_modified": [
          "02-harness-engineering"
        ],
        "governance_modified": false,
        "patterns_modified": []
      },
      "timestamp": "2026-02-22T15:39:54Z"
    }
  ],
  "version": 2
}
